<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Segment tag -->
    <script>
  !function(){var i="analytics",analytics=window[i]=window[i]||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"];analytics.factory=function(e){return function(){if(window[i].initialized)return window[i][e].apply(window[i],arguments);var n=Array.prototype.slice.call(arguments);if(["track","screen","alias","group","page","identify"].indexOf(e)>-1){var c=document.querySelector("link[rel='canonical']");n.push({__t:"bpc",c:c&&c.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})}n.unshift(e);analytics.push(n);return analytics}};for(var n=0;n<analytics.methods.length;n++){var key=analytics.methods[n];analytics[key]=analytics.factory(key)}analytics.load=function(key,n){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.setAttribute("data-global-segment-analytics-key",i);t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r);analytics._loadOptions=n};analytics._writeKey="90jPCsGjC1sUAhAbBQ3SsETTD43JGqaQ";;analytics.SNIPPET_VERSION="5.2.0";
  analytics.load("90jPCsGjC1sUAhAbBQ3SsETTD43JGqaQ");
  analytics.page();
  }}();
</script>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TJLMXXWL');</script>
<!-- End Google Tag Manager -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submission Form and Tic Tac Toe</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        form {
            margin-bottom: 20px;
        }
        .tic-tac-toe {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 5px;
        }
        .cell {
            width: 100px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            border: 1px solid #000;
            cursor: pointer;
        }
    </style>
    <!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/4878438.js"></script>
<!-- End of HubSpot Embed Code -->
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TJLMXXWL"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <a href="snake/snakegame.html">Play Snake Game</a>
    <br>
    <br>

    <h1>Submission Form and Tic Tac Toe</h1>
    
    <form method="POST" id="submissionForm">
        <label for="firstName">First Name:</label>
        <input type="text" id="firstName" name="firstName" required>
        <br><br>

        <label for="lastName">Last Name:</label>
        <input type="text" id="lastName" name="lastName" required>
        <br><br>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
        <br><br>

        <label for="countryCode">Country Code:</label>
        <input type="text" id="countryCode" name="countryCode">
        <br><br>

        <label for="title">Title:</label>
        <input type="text" id="title" name="title" >
        <br><br>

        <label for="company">Company:</label>
        <input type="text" id="company" name="company">
        <br><br>

        <label for="acxiomId">Acxiom ID:</label>
        <input type="text" id="acxiomId" name="acxiomId">
        <br><br>

        <label for="oracleMoatId">Oracle Moat ID:</label>
        <input type="text" id="oracleMoatId" name="oracleMoatId">
        <br><br>

        <button type="submit">Submit</button>
    </form>

    <div class="tic-tac-toe" id="ticTacToe">
        <div class="cell" data-index="0"></div>
        <div class="cell" data-index="1"></div>
        <div class="cell" data-index="2"></div>
        <div class="cell" data-index="3"></div>
        <div class="cell" data-index="4"></div>
        <div class="cell" data-index="5"></div>
        <div class="cell" data-index="6"></div>
        <div class="cell" data-index="7"></div>
        <div class="cell" data-index="8"></div>
    </div>


    <a href="https://www.toolband.com/">Tool Band</a>
    
    <!-- HubSPot test click id, form -->
  <form id="myForm">
        <label for="firstname">First Name:</label>
        <input type="text" id="firstname" name="firstname" placeholder="First Name" required />
        <br><br>

        <label for="lastname">Last Name:</label>
        <input type="text" id="lastname" name="lastname" placeholder="Last Name" required />
        <br><br>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" placeholder="Email" required />
        <br><br>

        <input type="hidden" id="linkedin_cookie" name="linkedin_cookie" />
        <br><br>

        <button type="submit">Submit</button>
    </form>

    <script>
        // Function to get the 'li_fat_id' either from the URL or from the cookies
        function getLinkedInCookie() {
            // First, try to get the 'li_fat_id' from the URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            let cookieValue = urlParams.get('li_fat_id');
            
            // If 'li_fat_id' is not found in the URL, check for it in the cookies
            if (!cookieValue) {
                cookieValue = getCookie('li_fat_id'); // This is the function to retrieve cookies
            }

            return cookieValue; // Return either the URL parameter or the cookie value
        }

        // Helper function to get a cookie by name
        function getCookie(name) {
            const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
            return match ? match[2] : null;
        }

        // Now, ensure the LinkedIn cookie value is set in the form
        document.getElementById('linkedin_cookie').value = getLinkedInCookie();

        // Log the LinkedIn cookie value for debugging
        console.log("LinkedIn Cookie Value Set in Hidden Field:", document.getElementById('linkedin_cookie').value);

        // Listen for form submission
        document.getElementById('myForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent form submission from refreshing the page

            // Collect form data and add the LinkedIn cookie
            const formData = {
                firstname: document.getElementById('firstname').value,
                lastname: document.getElementById('lastname').value,
                email: document.getElementById('email').value,
                linkedin_cookie: document.getElementById('linkedin_cookie').value
            };

            // Log the form data to verify it's correct
            console.log("Form Data Sent:", formData);

            // Send the data to HubSpot API
            fetch('https://api.hsforms.com/submissions/v3/integration/submit/4878438/b85c8731-0db4-4a17-aa89-a9a2298d5ec1', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    fields: [
                        { name: 'firstname', value: formData.firstname },
                        { name: 'lastname', value: formData.lastname },
                        { name: 'email', value: formData.email },
                        { name: 'linkedin_cookie', value: formData.linkedin_cookie }
                    ],
                    context: {
                        hutk: getCookie('hubspotutk'),  // Assuming HubSpot cookie is already set
                        pageUri: window.location.href,
                        pageName: document.title
                    }
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log('Form submission response:', data); // Log the response
                if (data.inlineMessage) {
                    alert(data.inlineMessage); // Optionally alert on success
                }
            })
            .catch(error => {
                console.error('Form submission error:', error); // Log any errors
            });
        });
    </script>

    <script>
        document.getElementById('submissionForm').addEventListener('submit', function(event) {
            event.preventDefault();
            alert('Form submitted!');
        });

        const cells = document.querySelectorAll('.cell');
        let currentPlayer = 'X';
        const board = Array(9).fill(null);

        cells.forEach(cell => {
            cell.addEventListener('click', () => {
                const index = cell.getAttribute('data-index');
                if (!board[index]) {
                    board[index] = currentPlayer;
                    cell.textContent = currentPlayer;
                    currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                    checkWinner();
                }
            });
        });

        function checkWinner() {
            const winningCombinations = [
                [0, 1, 2],
                [3, 4, 5],
                [6, 7, 8],
                [0, 3, 6],
                [1, 4, 7],
                [2, 5, 8],
                [0, 4, 8],
                [2, 4, 6]
            ];

            for (const combination of winningCombinations) {
                const [a, b, c] = combination;
                if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                    alert(`Player ${board[a]} wins!`);
                    resetBoard();
                    return;
                }
            }

            if (!board.includes(null)) {
                alert('It\'s a draw!');
                resetBoard();
            }
        }

        function resetBoard() {
            board.fill(null);
            cells.forEach(cell => cell.textContent = '');
            currentPlayer = 'X';
        }
    </script>
    <script>
        setTimeout(function() {
        // Your code here
            lifat = getCookie('li_fat_id');
            first = document.getElementById('firstName').value;
            last = document.getElementById('lastName').value;
            analytics.identify(lifat, {
              firstname: first,
              lastname: last
            });
        }, 3000);
    </script>
    
</body>
</html>
